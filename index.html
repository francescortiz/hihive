<!doctype html>
<html class="no-js" lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>HiHive Coworking — Pelai 9, Barcelona</title>
  <meta name="description" content="HiHive, coworking en el centro de Barcelona. Despachos y mesas de trabajo con servicios completos. Pelai 9, Entresuelo.">
  <link rel="stylesheet" href="css/style.css">

  <meta property="og:title" content="HiHive Coworking — Pelai 9, Barcelona">
  <meta property="og:type" content="website">
  <meta property="og:url" content="">
  <meta property="og:image" content="/icon.png">
  <meta property="og:image:alt" content="Logo de HiHive">

  <link rel="icon" href="/favicon.ico" sizes="any">
  <link rel="icon" href="/icon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="icon.png">

  <link rel="manifest" href="site.webmanifest">
  <meta name="theme-color" content="#f6e7c6">
</head>
<body>
  <header class="site-header" id="top">
    <div class="nav-wrap">
      <nav class="nav">
        <a href="#top" class="nav-link">Inicio</a>
        <a href="#despachos" class="nav-link">Despachos</a>
        <a href="#mesas" class="nav-link">Mesas</a>
        <a href="#comunes" class="nav-link">Zonas comunes</a>
        <a href="#servicios" class="nav-link">Servicios y equipación</a>
        <a href="#info" class="nav-link">Solicitar info</a>
        <a href="#condiciones" class="nav-link">Condiciones</a>
      </nav>
    </div>
    <h1 class="logo"><span class="logo-hi">Hi</span>Hive</h1>
    <p class="subtitle">Coworking en Barcelona centro</p>
  </header>

  <main>
    <section id="despachos" class="section">
      <h2>Despachos</h2>
      <div class="grid">
        <article class="card">
          <img class="marca-ocupado" src="img/ocupado.svg" alt="" aria-hidden="true">
          <img src="img/blank-white.svg" alt="Foto no disponible: despacho en construcción" loading="lazy">
          <div class="card-body">
            <h3>Despacho 1</h3>
            <p class="meta">Capacidad: 5 personas</p>
            <p class="price">900€ / mes</p>
            <span class="badge ocupado" aria-label="estado: no disponible">No disponible</span>
          </div>
        </article>
        <article class="card">
          <img class="marca-ocupado" src="img/ocupado.svg" alt="" aria-hidden="true">
          <img src="img/blank-white.svg" alt="Foto no disponible: despacho en construcción" loading="lazy">
          <div class="card-body">
            <h3>Despacho 2</h3>
            <p class="meta">Capacidad: 4 personas</p>
            <p class="price">700€ / mes</p>
            <span class="badge ocupado" aria-label="estado: no disponible">No disponible</span>
          </div>
        </article>
        <article class="card">
          <a href="despacho-3.html">
            <img src="img/fotos/Despacho 3/Despacho 3 ventana.jpg" alt="Fotos del Despacho 3" loading="lazy">
          </a>
          <div class="card-body">
            <h3><a href="despacho-3.html" class="nav-link" style="padding:0;border:none">Despacho 3</a></h3>
            <p class="meta">Capacidad: 8 personas</p>
            <p class="price">1350€ / mes</p>
            <span class="badge libre" aria-label="estado: libre">Libre</span>
          </div>
        </article>
        <article class="card">
          <img class="marca-ocupado" src="img/ocupado.svg" alt="" aria-hidden="true">
          <img src="img/blank-white.svg" alt="Foto no disponible: despacho en construcción" loading="lazy">
          <div class="card-body">
            <h3>Despacho 4</h3>
            <p class="meta">Capacidad: 4 personas</p>
            <p class="price">540€ / mes</p>
            <span class="badge ocupado" aria-label="estado: no disponible">No disponible</span>
          </div>
        </article>
        <article class="card">
          <img class="marca-ocupado" src="img/ocupado.svg" alt="" aria-hidden="true">
          <img src="img/blank-white.svg" alt="Foto no disponible: despacho en construcción" loading="lazy">
          <div class="card-body">
            <h3>Despacho 5</h3>
            <p class="meta">Capacidad: 5 personas</p>
            <p class="price">750€ / mes</p>
            <span class="badge ocupado" aria-label="estado: no disponible">No disponible</span>
          </div>
        </article>
        <article class="card">
          <img class="marca-ocupado" src="img/ocupado.svg" alt="" aria-hidden="true">
          <img src="img/blank-white.svg" alt="Foto no disponible: despacho en construcción" loading="lazy">
          <div class="card-body">
            <h3>Despacho 6</h3>
            <p class="meta">Capacidad: 10 personas</p>
            <p class="price">1650€ / mes</p>
            <span class="badge ocupado" aria-label="estado: no disponible">No disponible</span>
          </div>
        </article>
      </div>
    </section>

    <section id="mesas" class="section">
      <h2>Mesas de trabajo</h2>
      <div class="grid grid-5">
        <article class="card">
          <img src="img/fotos/Mesas/Mesas.2.jpg" alt="Mesas de trabajo" loading="lazy">
          <div class="card-body">
            <h3>Mesa 1</h3>
            <p class="price">160€ / mes</p>
            <span class="badge libre">Libre</span>
          </div>
        </article>
        <article class="card">
          <img src="img/fotos/Mesas/Mesas.2.jpg" alt="Mesas de trabajo" loading="lazy">
          <div class="card-body">
            <h3>Mesa 2</h3>
            <p class="price">160€ / mes</p>
            <span class="badge ocupado">Ocupado</span>
          </div>
        </article>
        <article class="card">
          <img src="img/fotos/Mesas/Mesas.2.jpg" alt="Mesas de trabajo" loading="lazy">
          <div class="card-body">
            <h3>Mesa 3</h3>
            <p class="price">160€ / mes</p>
            <span class="badge libre">Libre</span>
          </div>
        </article>
        <article class="card">
          <img src="img/fotos/Mesas/Mesas.2.jpg" alt="Mesas de trabajo" loading="lazy">
          <div class="card-body">
            <h3>Mesa 4</h3>
            <p class="price">160€ / mes</p>
            <span class="badge ocupado">Ocupado</span>
          </div>
        </article>
        <article class="card">
          <img src="img/fotos/Mesas/Mesas.2.jpg" alt="Mesas de trabajo" loading="lazy">
          <div class="card-body">
            <h3>Mesa 5</h3>
            <p class="price">160€ / mes</p>
            <span class="badge libre">Libre</span>
          </div>
        </article>
      </div>
    </section>

    <section id="comunes" class="section">
      <h2>Zonas comunes</h2>
      <div class="grid grid-3">
        <figure class="card photo-only">
          <img src="img/fotos/Sala Pelayo/Sala de estar Pelayo.2.jpg" alt="Sala de estar Pelayo" loading="lazy">
          <figcaption>Sala de estar Pelayo</figcaption>
        </figure>
        <figure class="card photo-only">
          <img src="img/fotos/Sala Balmes/Sala de estar Balmes.jpg" alt="Sala de estar Interior" loading="lazy">
          <figcaption>Sala de estar Interior</figcaption>
        </figure>
      </div>
    </section>

    <section id="servicios" class="section">
      <h2>Servicios y equipación</h2>
      <ul class="services">
        <li>Dos salas de estar</li>
        <li>Cocina-office</li>
        <li>Dos aseos</li>
        <li>Aire acondicionado y bomba de calor en todos los despachos y zonas comunes</li>
        <li>Alarma</li>
        <li>Acceso al recinto con la app Akiles</li>
      </ul>
    </section>

    <section id="info" class="section">
      <h2>Solicitar información</h2>
      <form class="form" action="#" method="post" onsubmit="return false;">
        <div class="form-row">
          <label for="nombre">Nombre</label>
          <input id="nombre" name="nombre" type="text" required placeholder="Tu nombre">
        </div>
        <div class="form-row">
          <label for="correo">Correo</label>
          <input id="correo" name="correo" type="email" required placeholder="tu@email.com">
        </div>
        <div class="form-row">
          <label for="ubicacion">Ubicación que se solicita</label>
          <select id="ubicacion" name="ubicacion" required>
            <optgroup label="Despachos">
              <option>Despacho 1</option>
              <option>Despacho 2</option>
              <option>Despacho 3</option>
              <option>Despacho 4</option>
              <option>Despacho 5</option>
              <option>Despacho 6</option>
            </optgroup>
            <optgroup label="Mesas de trabajo">
              <option>Mesa 1</option>
              <option>Mesa 2</option>
              <option>Mesa 3</option>
              <option>Mesa 4</option>
              <option>Mesa 5</option>
            </optgroup>
          </select>
        </div>
        <div class="form-actions">
          <button type="submit" class="btn">Enviar</button>
        </div>
      </form>
    </section>

    <section id="condiciones" class="section">
      <h2>Condiciones generales</h2>
      <div class="legal">
        <p>Las condiciones generales de uso y contratación estarán disponibles bajo solicitud. Las tarifas indicadas incluyen el acceso a los servicios mencionados y pueden variar según disponibilidad y promociones vigentes. Para información detallada de contratos, depósitos y tiempos de permanencia mínima, contacta con nosotros mediante el formulario.</p>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <p>© <span id="year"></span> <span class="logo-hi">Hi</span>Hive · Pelai 9, Entresuelo · Barcelona</p>
  </footer>

  <script>
    // Actualiza año del footer
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>

  <!-- Botón fijo para volver arriba -->
  <button id="toTopBtn" class="to-top" type="button" aria-label="Volver arriba" title="Volver arriba">
    <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
      <path fill="currentColor" d="M12 5l7 7-1.41 1.41L13 9.83V20h-2V9.83L6.41 13.41 5 12z"/>
    </svg>
  </button>

  <!-- Lightbox para Zonas comunes -->
  <div id="lightbox" class="lightbox" role="dialog" aria-modal="true" aria-labelledby="lightbox-caption" aria-hidden="true">
    <button class="lb-btn close" type="button" aria-label="Cerrar" title="Cerrar">×</button>
    <button class="lb-btn prev" type="button" aria-label="Anterior" title="Anterior">❮</button>
    <button class="lb-btn next" type="button" aria-label="Siguiente" title="Siguiente">❯</button>
    <div class="lb-counter" aria-live="polite"></div>
    <figure class="lb-figure">
      <img id="lightbox-img" alt="" src="" decoding="async">
      <figcaption id="lightbox-caption"></figcaption>
    </figure>
  </div>

  <script>
    // Mostrar/ocultar el botón al hacer scroll y volver arriba con suavidad
    (function() {
      const btn = document.getElementById('toTopBtn');
      if (!btn) return;
      const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      const toggle = () => {
        if (window.scrollY > 200) btn.classList.add('show');
        else btn.classList.remove('show');
      };
      window.addEventListener('scroll', toggle, { passive: true });
      window.addEventListener('load', toggle);
      btn.addEventListener('click', () => {
        const topEl = document.getElementById('top');
        if (prefersReduced) {
          window.scrollTo(0, 0);
        } else if (topEl && topEl.scrollIntoView) {
          topEl.scrollIntoView({ behavior: 'smooth' });
        } else {
          window.scrollTo({ top: 0, behavior: 'smooth' });
        }
      });
    })();
  </script>

  <script>
    // Lightbox genérico para galerías (Zonas comunes y Despachos)
    (function() {
      // Sección Zonas comunes
      const comunes = document.querySelector('#comunes');

      // Definición de galerías disponibles en la home
      const galleries = {
        // Zonas comunes
        pelayo: [
          { src: 'img/fotos/Sala Pelayo/Sala de estar Pelayo.1.jpg', caption: 'Sala de estar Pelayo' },
          { src: 'img/fotos/Sala Pelayo/Sala de estar Pelayo.2.jpg', caption: 'Sala de estar Pelayo' },
          { src: 'img/fotos/Sala Pelayo/Sala de estar Pelayo.3.jpg', caption: 'Sala de estar Pelayo' }
        ],
        balmes: [
          { src: 'img/fotos/Sala Balmes/Sala de estar Balmes.jpg', caption: 'Sala de estar Interior' },
          { src: 'img/fotos/Sala Balmes/Sala de estar Balmes.1.jpg', caption: 'Sala de estar Interior' },
          { src: 'img/fotos/Sala Balmes/Sala de estar Balmes.3.jpg', caption: 'Sala de estar Interior' }
        ],
        // Mesas de trabajo
        mesas: [
          { src: 'img/fotos/Mesas/Mesas.1.jpg', caption: 'Mesas de trabajo' },
          { src: 'img/fotos/Mesas/Mesas.2.jpg', caption: 'Mesas de trabajo' },
          { src: 'img/fotos/Mesas/Mesas.4.jpg', caption: 'Mesas de trabajo' }
        ],
        // Despachos (actualmente solo Despacho 3 tiene fotos)
        despacho3: [
          { src: 'img/fotos/Despacho 3/Despacho 3 ventana.jpg', caption: 'Ventana del despacho' },
          { src: 'img/fotos/Despacho 3/Despacho 3 mesas pared.jpg', caption: 'Mesas junto a la pared' },
          { src: 'img/fotos/Despacho 3/Despacho 3 mesas ventana.jpg', caption: 'Mesas junto a la ventana' }
        ]
      };

      const lb = document.getElementById('lightbox');
      const lbImg = document.getElementById('lightbox-img');
      const lbCaption = document.getElementById('lightbox-caption');
      const lbCounter = lb.querySelector('.lb-counter');
      const btnClose = lb.querySelector('.lb-btn.close');
      const btnPrev = lb.querySelector('.lb-btn.prev');
      const btnNext = lb.querySelector('.lb-btn.next');

      let currentGallery = null;
      let currentIndex = 0;
      let lastActive = null;

      function show(index) {
        if (!currentGallery) return;
        const len = currentGallery.length;
        currentIndex = ((index % len) + len) % len; // wrap
        const item = currentGallery[currentIndex];
        lbImg.src = item.src;
        lbImg.alt = item.caption || '';
        lbCaption.textContent = item.caption || '';
        if (lbCounter) {
          lbCounter.textContent = (currentIndex + 1) + ' / ' + len;
        }
      }

      function open(galleryKey, startSrc) {
        currentGallery = galleries[galleryKey];
        if (!currentGallery || currentGallery.length === 0) return;
        // seleccionar índice inicial por coincidencia con thumbnail si es posible
        let startIdx = 0;
        if (startSrc) {
          const found = currentGallery.findIndex(it => startSrc.endsWith(it.src));
          if (found >= 0) startIdx = found;
          else {
            // intentar coincidir por nombre base (por si rutas relativas absolutas difieren)
            const base = startSrc.split('/').pop();
            const found2 = currentGallery.findIndex(it => it.src.endsWith(base));
            if (found2 >= 0) startIdx = found2;
          }
        }
        lastActive = document.activeElement;
        document.body.style.overflow = 'hidden';
        lb.classList.add('open');
        lb.removeAttribute('aria-hidden');
        show(startIdx);
        btnClose.focus();
      }

      function close() {
        lb.classList.remove('open');
        lb.setAttribute('aria-hidden', 'true');
        document.body.style.overflow = '';
        if (lastActive && lastActive.focus) lastActive.focus();
      }

      // Controles
      btnClose.addEventListener('click', close);
      btnPrev.addEventListener('click', () => show(currentIndex - 1));
      btnNext.addEventListener('click', () => show(currentIndex + 1));

      // Cerrar al hacer click en el fondo (pero no sobre la imagen/controles)
      lb.addEventListener('click', (e) => {
        if (e.target === lb) close();
      });

      // Teclado
      document.addEventListener('keydown', (e) => {
        if (!lb.classList.contains('open')) return;
        if (e.key === 'Escape') close();
        else if (e.key === 'ArrowLeft') show(currentIndex - 1);
        else if (e.key === 'ArrowRight') show(currentIndex + 1);
      });

      // Zonas comunes: asociar figuras y añadir contador total en miniaturas
      if (comunes) {
        const figures = comunes.querySelectorAll('figure.card.photo-only');

        function addCountBadge(figure, count) {
          if (!figure) return;
          // Evitar duplicados
          if (figure.querySelector('.photo-count')) return;
          const badge = document.createElement('div');
          badge.className = 'photo-count';
          badge.textContent = count + (count === 1 ? ' foto' : ' fotos');
          badge.setAttribute('aria-label', 'Galería con ' + count + (count === 1 ? ' foto' : ' fotos'));
          figure.appendChild(badge);
        }

        if (figures[0]) {
          const img = figures[0].querySelector('img');
          addCountBadge(figures[0], (galleries.pelayo || []).length);
          figures[0].addEventListener('click', () => open('pelayo', img ? img.currentSrc || img.src : undefined));
        }
        if (figures[1]) {
          const img = figures[1].querySelector('img');
          addCountBadge(figures[1], (galleries.balmes || []).length);
          figures[1].addEventListener('click', () => open('balmes', img ? img.currentSrc || img.src : undefined));
        }
      }

      // Despachos (home): permitir ver fotos en grande al hacer click en la miniatura del Despacho 3
      const despacho3ThumbLink = document.querySelector('#despachos a[href="despacho-3.html"]');
      if (despacho3ThumbLink) {
        despacho3ThumbLink.addEventListener('click', (e) => {
          // Abrir lightbox en lugar de navegar si hay galería
          if (galleries.despacho3 && galleries.despacho3.length) {
            e.preventDefault();
            const img = despacho3ThumbLink.querySelector('img');
            open('despacho3', img ? img.currentSrc || img.src : undefined);
          }
        });
      }

      // Mesas de trabajo: abrir todas las fotos en grande al clicar
      const mesasSection = document.querySelector('#mesas');
      if (mesasSection && galleries.mesas && galleries.mesas.length) {
        const mesaThumbs = mesasSection.querySelectorAll('.card img');
        mesaThumbs.forEach((imgEl) => {
          const card = imgEl.closest('.card');
          if (!card) return;
          card.addEventListener('click', (e) => {
            e.preventDefault();
            open('mesas', imgEl.currentSrc || imgEl.src);
          });
        });
      }
    })();
  </script>
</body>
</html>
